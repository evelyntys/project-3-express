{{#extends 'base'}}
{{#block 'content'}}
<div class="container">
     <form method="GET">
        <div class="row">
            {{{form}}}
        </div>
        <input type="submit" class="my-2 btn btn-primary text-end" value="search" />
    </form>
    <h4>orders</h4>
    <div class="container" style="overflow:auto">
    <table class="table table-hover table-striped">
    <thead>
        <tr>
            <th>ID</th>
            <th>Customer name</th>
            <th>Customer email</th>
            <th>Total cost</th>
            <th>Order date</th>
            <th>Payment reference</th>
            <th>Order status</th>
            <th>Last updated</th>
            <th>Order summary</th>
            <th>Update order</th>
        </tr>
    </thead>
    <tbody>
        {{#each orders}}
        <tr>
            <td>{{this.id}}</td>
            <td>{{this.customer.first_name}} {{this.customer.last_name}}</td>
            <td>{{this.customer.email}}</td>
            <td>{{costWithDecimal this.total_cost}}</td>
            <td>{{displayDate this.ordered_date}}</td>
            <td>{{this.payment_reference}}</td>
            <td>{{this.order_status.order_status}}</td>
            <td>{{displayDateTime this.updated_date}}</td>
            <td>
                <ol>
                {{#each this.orderedItems}}
                <li class="ol-list">
                {{this.figure.name}} x {{this.quantity}}
                </li>
                {{/each}}
                </ol> 
                </td>
            <td>
                <a href="/orders/{{this.id}}/update" class="btn btn-primary btn-sm"><i class="bi bi-pencil-square"></i></a>
            </td>
        </tr>
        {{/each}}
    </tbody>
</table>
</div>
<div>
</div>
{{/block}}
{{/extends}}